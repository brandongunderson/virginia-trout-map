"use strict";(()=>{var e={};e.id=684,e.ids=[684],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5234:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>E,patchFetch:()=>g,requestAsyncStorage:()=>I,routeModule:()=>A,serverHooks:()=>d,staticGenerationAsyncStorage:()=>T});var s={};t.r(s),t.d(s,{GET:()=>l,POST:()=>S});var a=t(6618),o=t(830),n=t(4316),i=t(8370);let c="https://services.dwr.virginia.gov/arcgis/rest/services/Projects/TroutApp/MapServer",u={TROUT_STREAMS:0,STOCKING_LOCATIONS:1,STOCKING_EVENTS:2,TROUT_REGULATIONS:3,PUBLIC_LAKES:4,WILDLIFE_MANAGEMENT_AREAS:5};u.TROUT_STREAMS,u.STOCKING_LOCATIONS,u.STOCKING_EVENTS,u.TROUT_REGULATIONS,u.PUBLIC_LAKES,u.WILDLIFE_MANAGEMENT_AREAS,u.TROUT_STREAMS,u.STOCKING_LOCATIONS,u.STOCKING_EVENTS,u.TROUT_REGULATIONS,u.PUBLIC_LAKES,u.WILDLIFE_MANAGEMENT_AREAS;let p={where:"1=1",outFields:"*",f:"json",outSR:"4326",returnGeometry:"true"};async function l(e){let{searchParams:r}=new URL(e.url),t=r.get("layer"),s=r.get("where")||"1=1",a=r.get("outFields")||"*";if(!t)return i.NextResponse.json({error:"Layer ID required"},{status:400});try{let e=`${c}/${t}/query`,r=new URLSearchParams({...p,where:s,outFields:a});console.log(`Fetching ArcGIS layer ${t} from: ${e}`);let o=await fetch(`${e}?${r.toString()}`,{headers:{Accept:"application/json"}});if(!o.ok){let e=await o.text();throw console.error(`ArcGIS API error (${o.status}):`,e),Error(`ArcGIS API error: ${o.status}`)}let n=await o.json(),u=n.features?.length||0;return console.log(`Successfully fetched layer ${t}: ${u} features`),i.NextResponse.json({success:!0,data:n,layerId:parseInt(t),featureCount:u})}catch(e){return console.error("ArcGIS fetch error:",e),i.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Failed to fetch ArcGIS data",layerId:parseInt(t||"0")},{status:500})}}async function S(e){try{let r=(await e.json()).layer;if(!r)return i.NextResponse.json({error:"Layer ID required"},{status:400});let t=`${c}/${r}/query`,s=new URLSearchParams(p),a=await fetch(`${t}?${s.toString()}`);if(!a.ok)throw Error(`ArcGIS API error: ${a.status}`);let o=await a.json();return i.NextResponse.json({success:!0,message:`Layer ${r} data refreshed`,featureCount:o.features?.length||0})}catch(e){return console.error("ArcGIS refresh error:",e),i.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Failed to refresh ArcGIS data"},{status:500})}}let A=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/arcgis/route",pathname:"/api/arcgis",filename:"route",bundlePath:"app/api/arcgis/route"},resolvedPagePath:"/workspace/virginia-trout-map/app/api/arcgis/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:I,staticGenerationAsyncStorage:T,serverHooks:d}=A,E="/api/arcgis/route";function g(){return(0,n.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:T})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[573,781],()=>t(5234));module.exports=s})();